# spring-boot-shiro

### 参考

- 关于用户-角色-权限设计，有著名的RBAC(Role-Base-Access-Controller)基于角色的权限访问控制
- 相关博客：https://blog.csdn.net/yangwenxue_admin/article/details/73936803

### 本项目设计

	后台管理员：admin
	
	角色：role
		系统管理员
		用户管理员
		商品管理员
		订单管理员
	
	权限：permission
		是根据资源权限一一对应的，因此主要关注具体资源权限
	
	资源权限：resource
		（其实资源和权限本来就容易混淆，这样设计可以淡化资源和权限的概念）	
		菜单资源：menu	（菜单权限只需要授权具体的菜单页面就可以了，无需授权父菜单）
			首页菜单
			用户管理菜单
			商品管理菜单
				数码电子商品管理菜单
					手机管理菜单
					电脑管理菜单
				衣装服饰商品管理菜单
			订单管理菜单
				在线支付订单菜单
				货到付款订单菜单
			系统管理菜单
				管理员管理菜单
				角色管理菜单
				权限管理菜单
			个人信息菜单
		功能操作权限资源：operation（基于接口的，是用户操作权限，和菜单并无关系，和菜单资源解耦）
			用户管理：增删改查
			商品管理：增删改查
			订单管理：删改查
			系统管理：增删改查
			个人信息：改查

### 关于jwt的方式使用shiro
1. 因为jwt是无状态的，所以在使用shiro方面和传统的session不一样，登录认证和权限认证都有所不同

2. 大体执行流程
	* 用户登录 -> 调用service判断用户是否登录成功  -> 登录成功生成token返回给接口调用者
	* 用户登录完成，请求头携带token -> shiro拦截器Filter拦截请求 -> 判断token是否可用
	* token可用 -> 表示有登录权限 -> 从token中取出用户id -> 根据用户id查询用户权限信息
	* 整个jwt方式使用shiro大致完成
	
3. 目前com.spring.boot.shiro.filter.JwtFilter还有待完善

